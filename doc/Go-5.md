# Go-5 函数

## 介绍
每一个程序都包含很多的函数：函数是基本的代码块。  
Go是编译型语言，所以函数编写的顺序是无关紧要的。  
Go 里面拥三种类型的函数：  
- 普通的带有名字的函数
- 匿名函数或者lambda函数
- 方法  

所有类型的函数都可以有参数与返回值。函数参数、返回值以及它们的类型被统称为函数签名。  
在 Go 里面是不允许函数重载的。

## 函数参数与返回值
**小括号和左大括号必须在同一行**

示例如下：
```go
func method() { //小括号和左大括号必须在同一行
}

//带参数的方法
func method(a int, b string){
	
}

//同类型的参数可以简写
func method(a, b string){
	
}

//带返回值的函数
func method(a, b int) int {
	return a + b
}

func method(a, b int) (int, bool) {
	return a + b, true
}

```

函数也可以以申明的方式被使用，作为一个函数类型：  
```go
type name func(int, int) int
```

如果函数的最后一个参数是采用 ...type 的形式，那么这个函数就可以处理一个变长的参数，这个长
度可以为 0，这样的函数称为变参函数。  
```go
func method(a, b ... int) {
}
```


## 按值传递、按引用传递
Go 默认使用按值传递来传递参数，也就是传递参数的副本。函数接收参数副本之后，在使用变量的过程
中可能对副本的值进行更改，但不会影响到原来的变量。  
如果想直接修改参数的值，而不是对参数的副本进行操作，你需要将参数的地址（变量名前
面添加&符号）传递给函数，这就是按引用传递。

## 递归函数
当一个函数在其函数体内调用自身，则称之为递归。例如计算斐波那契数列。

## 闭包
当我们不希望给函数起名字的时候，可以使用匿名函数，例如：  
```go
func(x, y int) int { return x + y }
```
如果你在编辑器中按照上述方式写的话，编辑器会报错，因为这个匿名函数不能独立存在。  

但是我们可以把匿名函数赋给一个变量，也就是保存函数到地址变量中，例如：
```go
fplus := func(x, y int) int { return x + y }

//通过变量名调用函数得到结果
fplus(2,3)

//所以我们实际上拥有的是一个函数值：匿名函数可以被赋值给变量并作为值使用。

```

匿名函数同样被称之为闭包（函数式语言的术语）：它们被允许调用定义在其它环境下的变量。闭包可使
得某个函数捕捉到一些外部状态，例如：函数被创建时的状态。另一种表示方式为：一个闭包继承了函数
所声明时的作用域。这种状态（作用域内的变量）都被共享到闭包的环境中，因此这些变量可以在闭包中
被操作，直到被销毁。  

闭包经常被用作包装函数：它们会预先定义好 1 个或多个参数以用于包装。  
另一个不错的应用就是使用闭包来完成更加简洁的错误检查。
  
请看下面代码，结果会输出什么呢？：
```go
package main

import (
	"fmt"
)

func main() {
	a := add()
	fmt.Println(a(1))
}

func add() func(b int) int {
	return func(b int) int {
		return b + 2
	}
}
```
